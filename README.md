# Docserve

**Docserve** purpose is to make it easier to produce documentation for a project where you want to show different documentation to users with different roles.

**Warning (or not)**: much of this code produced with gpt 01-preview

This simple library solves the following problems:
- serve docs appropriate to the user's role, and only those docs.
- avoid having to create yml files for the docs created, just assume all the docs in a role folder are to be included

## Features

- **Role-Based Access Control**: Serve documentation to users based on their group memberships.
- **Reusable App**: Easily integrate into multiple Django projects.
- **MkDocs Integration**: Supports documentation generated by MkDocs, including themes like Material Design.
- **Easy Configuration**: Minimal setup required to get started.
- **Static Files Handling**: Manages static assets (CSS, JS) required by MkDocs documentation.

## Requirements

- Python 3.7 or higher
- Django 3.2 or higher
- MkDocs 1.4.2 or higher
- Optional: MkDocs Material theme if used

## Installation

1. **Install the Package**

   You can install `docserve` directly from your local source or via a package repository if published.

   ```bash
   pip install django-docserve

## Add to Installed Apps

In your project's settings.py, add docserve to the INSTALLED_APPS list:

    INSTALLED_APPS = [
        # ... other installed apps ...
        'docserve',
    ]

Point to the location of your source docs:

    DOCSERVE_DOCS_ROOT = os.path.join(BASE_DIR, 'docs')  # source .md files
    DOCSERVE_DOCS_SITE_ROOT = os.path.join(BASE_DIR, 'docs_site')  # where .html files will be put

or

    DOCSERVE_DOCS_ROOT = BASE_DIR / 'docs'    # source .md files
    DOCSERVE_DOCS_SITE_ROOT = BASE_DIR / 'docs_site'   # where .html files will be put


Include URLs

In your project's urls.py, include docserve URLs:

    from django.urls import path, include

    urlpatterns = [
         path('docs/', include(('docserve.urls', 'docserve'), namespace='docserve')),
         ...
    ]


## Add User Roles and Docs

The whole purpose of this library is to be able to supply different docs to different types of user.  The users role or roles can be based on the django groups they have or you can customise how you define this role.

If you want to use django groups and you don't already have the groups setup you can do that in the admin interface or programmatically like this:

    from django.contrib.auth.models import Group
    
    roles = ['admin', 'factory', 'distributor', 'support', 'user']
    for role in roles:
        Group.objects.get_or_create(name=role)
    Assign Users to Groups

Use the Django admin interface or scripts to assign users to the appropriate groups.

## Add your docs directory, role directory and docs

Create a docs directory wherever you specified in your setting DOCSERVE_DOCS_ROOT

For each role, create a subdirectory and add your .md files to that directory


## Build your Docs 

Each time you change the .md files, you will need to rebuild your docs.  To do this run two management commands:
          
        python manage.py generate_mkdocs_yml
        python manage.py build_docs

## Customisation

### Templates

To modify the index page, look at the page in docserve/templates/home_page.html and put your customised version into your project's templates directory under a docserve directory.

## URLs

If you don't want to use the /docs url, modify the url root in your urls.py, it should just work!

## Use a customised definition of role instead of django groups

coming soon...

## Contributing

Contributions are welcome! Please submit issues and pull requests for any features or bug fixes.

### License
This project is licensed under the MIT License.
=
